%META:TOPICINFO{author="ProjectContributor" date="1252720972" format="1.1" version="$Rev$"}%
%META:TOPICPARENT{name="UserToolsCategory"}%
---+ %MAKETEXT{"Registration"}%

%IF{"context registration_supported" 
then="*%MAKETEXT{"To edit pages on this site, you must have a registered user name and password."}%* %IF{"context registration_enabled" then="" else="%BR%%BR% *%MAKETEXT{"Sorry, Registration has been temporarily disabled"}%* "}%" 
else="*%MAKETEXT{"This site does _not_ support new User Registration"}%*"
}%

<!--
      * Set NOREGISTRATION = %IF{"context registration_supported" then="%IF{"context registration_enabled" then="" else="DISABLED"}%" else="DISABLED"}%
-->

%MAKETEXT{"If you already have an account, you can [[[_1]][change]] and [[[_2]][reset]] your password." args="%SYSTEMWEB%.ChangePassword,%SYSTEMWEB%.ResetPassword"}%

<!-- IMPORTANT NOTE if you want to customize this form: You can delete or add new input fields in this form. The name="" parameter of the input tags must start with: "Twk0..." (if this is an optional entry), "Twk1..." (if this is a required entry). This will ensure that the fields are processed correctly. -->

<form action="%SCRIPTURLPATH{"register"}%/%USERSWEB%/%HOMETOPIC%" method="post">
<div class="foswikiFormSteps">
<div class="foswikiFormStep">
*%MAKETEXT{"To register as a new user, simply fill out this form:"}%*
</div>
<div class="foswikiFormStep">
<table id="registration">
<tr>
  <td class="registrationLabel"> %MAKETEXT{"First Name:"}% </td>
  <td><input %NOREGISTRATION% type="text" name="Twk1FirstName" size="40" class="foswikiInputField" value="" onblur="this.form.Twk1WikiName.value=foswiki.String.makeWikiWord(this.value+' '+this.form.Twk1LastName.value)" /> <span class="foswikiGrayText"><span class="foswikiGrayText">%MAKETEXT{"required"}%</span></span></td>
</tr>
<tr>
  <td class="registrationLabel"> %MAKETEXT{"Last Name:"}% </td>
  <td><input %NOREGISTRATION%  type="text" name="Twk1LastName" size="40" class="foswikiInputField" value="" onblur="this.form.Twk1WikiName.value=foswiki.String.makeWikiWord(this.form.Twk1FirstName.value+' '+this.value)" /> <span class="foswikiGrayText">%MAKETEXT{"required"}%</span> </td>
</tr>
  <td class="registrationLabel"> %MAKETEXT{"(identifies you to others) WikiName:"}% </td>
  <td><input %NOREGISTRATION%  type="text" name="Twk1WikiName" size="40" class="foswikiInputField" value="" onblur="" /> <span class="foswikiGrayText">%MAKETEXT{"required"}%</span> </td>
</tr>
<!--
   # optional row for login name, enabled by {Register}{AllowLoginName} option in =configure=
   * Set BESPOKE_AUTH = <tr><td align=\"right\"> %MAKETEXT{"(how you log in) LoginName:"}% </td><td><input %NOREGISTRATION% type=\"text\" name=\"Twk1LoginName\" size=\"40\" class=\"foswikiInputField\" value=\"%REMOTE_USER%\" /> <span class="foswikiGrayText">%MAKETEXT{"required"}%</span> </td></tr>
-->
%IF{"$ ALLOWLOGINNAME" then="%BESPOKE_AUTH%"}%
<tr>
  <td class="registrationLabel"> %MAKETEXT{"E-mail address:"}% </td>
  <td><input %NOREGISTRATION%  type="text" name="Twk1Email" size="40" class="foswikiInputField" value="" /> <span class="foswikiGrayText">%MAKETEXT{"required"}%</span> </td>
</tr>
<!--
   # optional rows for password, enabled by {Register}{AllowLoginName} option in =configure=, we assume that login name means that Foswiki does not handle passwords
   * Set BESPOKE_PASSWORD = <tr><td align=\"right\"> %MAKETEXT{"Your password:"}% </td><td><input %NOREGISTRATION% type=\"password\" name=\"Twk0Password\" size=\"40\" class=\"foswikiInputField\" value=\"\" /> <span class=\"foswikiGrayText\">%MAKETEXT{"required"}%</span> </td></tr>\
     <tr><td align=\"right\"> %MAKETEXT{"Verify password:"}% </td><td><input %NOREGISTRATION% type=\"password\" name=\"Twk0Confirm\" size=\"40\" class=\"foswikiInputField\" value=\"\" /> <span class=\"foswikiGrayText\">%MAKETEXT{"required"}%</span> </td></tr>
-->
%IF{"$ ALLOWLOGINNAME < 1" then="%BESPOKE_PASSWORD%"}%
<tr>
  <td class="registrationLabel"> %MAKETEXT{"Organisation name:"}% </td>
  <td><input %NOREGISTRATION%  type="text" name="Twk0OrganisationName" size="40" class="foswikiInputField" value="" /></td>
</tr><tr>
  <td class="registrationLabel"> %MAKETEXT{"Organisation URL:"}% </td>
  <td><input %NOREGISTRATION%  type="text" name="Twk0OrganisationURL" size="40" class="foswikiInputField" onBlur="if(this.value=='http://') { this.value='' }" onFocus="if(this.value=='') { this.value='http://' }" /></td>
</tr><tr>
  <td class="registrationLabel"> %MAKETEXT{"Country:"}% </td>
  <td>
  <select class="foswikiSelect" %NOREGISTRATION% name="Twk0Country" size="1">
  <option selected value="">Select...</option>
  <option>Andorra</option>
  <option>United Arab Emirates</option>
  <option>Afghanistan</option>
  <option>Antigua and Barbuda</option>
  <option>Anguilla</option>
  <option>Albania</option>
  <option>Armenia</option>
  <option>Netherlands Antilles</option>
  <option>Angola</option>
  <option>Antarctica</option>
  <option>Argentina</option>
  <option>American Samoa</option>
  <option>Austria</option>
  <option>Australia</option>
  <option>Aruba</option>
  <option>Aland Islands</option>
  <option>Azerbaijan</option>
  <option>Bosnia and Herzegovina</option>
  <option>Barbados</option>
  <option>Bangladesh</option>
  <option>Belgium</option>
  <option>Burkina Faso</option>
  <option>Bulgaria</option>
  <option>Bahrain</option>
  <option>Burundi</option>
  <option>Benin</option>
  <option>Saint Barthï¿½lemy</option>
  <option>Bermuda</option>
  <option>Brunei</option>
  <option>Bolivia</option>
  <option>Brazil</option>
  <option>Bahamas</option>
  <option>Bhutan</option>
  <option>Bouvet Island</option>
  <option>Botswana</option>
  <option>Belarus</option>
  <option>Belize</option>
  <option>Canada</option>
  <option>Cocos Islands</option>
  <option>Congo - Kinshasa</option>
  <option>Central African Republic</option>
  <option>Congo - Brazzaville</option>
  <option>Switzerland</option>
  <option>Ivory Coast</option>
  <option>Cook Islands</option>
  <option>Chile</option>
  <option>Cameroon</option>
  <option>China</option>
  <option>Colombia</option>
  <option>Costa Rica</option>
  <option>Cuba</option>
  <option>Cape Verde</option>
  <option>Christmas Island</option>
  <option>Cyprus</option>
  <option>Czech Republic</option>
  <option>Germany</option>
  <option>Djibouti</option>
  <option>Denmark</option>
  <option>Dominica</option>
  <option>Dominican Republic</option>
  <option>Algeria</option>
  <option>Ecuador</option>
  <option>Estonia</option>
  <option>Egypt</option>
  <option>Western Sahara</option>
  <option>Eritrea</option>
  <option>Spain</option>
  <option>Ethiopia</option>
  <option>Finland</option>
  <option>Fiji</option>
  <option>Falkland Islands</option>
  <option>Micronesia</option>
  <option>Faroe Islands</option>
  <option>France</option>
  <option>Gabon</option>
  <option>United Kingdom</option>
  <option>Grenada</option>
  <option>Georgia</option>
  <option>French Guiana</option>
  <option>Guernsey</option>
  <option>Ghana</option>
  <option>Gibraltar</option>
  <option>Greenland</option>
  <option>Gambia</option>
  <option>Guinea</option>
  <option>Guadeloupe</option>
  <option>Equatorial Guinea</option>
  <option>Greece</option>
  <option>South Georgia and the South Sandwich Islands</option>
  <option>Guatemala</option>
  <option>Guam</option>
  <option>Guinea-Bissau</option>
  <option>Guyana</option>
  <option>Hong Kong</option>
  <option>Heard Island and McDonald Islands</option>
  <option>Honduras</option>
  <option>Croatia</option>
  <option>Haiti</option>
  <option>Hungary</option>
  <option>Indonesia</option>
  <option>Israel</option>
  <option>Isle of Man</option>
  <option>India</option>
  <option>British Indian Ocean Territory</option>
  <option>Iraq</option>
  <option>Iran</option>
  <option>Iceland</option>
  <option>Italy</option>
  <option>Jersey</option>
  <option>Jamaica</option>
  <option>Jordan</option>
  <option>Japan</option>
  <option>Kenya</option>
  <option>Kyrgyzstan</option>
  <option>Cambodia</option>
  <option>Kiribati</option>
  <option>Comoros</option>
  <option>Saint Kitts and Nevis</option>
  <option>North Korea</option>
  <option>South Korea</option>
  <option>Kuwait</option>
  <option>Cayman Islands</option>
  <option>Kazakhstan</option>
  <option>Laos</option>
  <option>Lebanon</option>
  <option>Saint Lucia</option>
  <option>Liechtenstein</option>
  <option>Sri Lanka</option>
  <option>Liberia</option>
  <option>Lesotho</option>
  <option>Lithuania</option>
  <option>Luxembourg</option>
  <option>Latvia</option>
  <option>Libya</option>
  <option>Morocco</option>
  <option>Monaco</option>
  <option>Moldova</option>
  <option>Montenegro</option>
  <option>Saint Martin</option>
  <option>Madagascar</option>
  <option>Marshall Islands</option>
  <option>Macedonia</option>
  <option>Mali</option>
  <option>Myanmar</option>
  <option>Mongolia</option>
  <option>Macao</option>
  <option>Northern Mariana Islands</option>
  <option>Martinique</option>
  <option>Mauritania</option>
  <option>Montserrat</option>
  <option>Malta</option>
  <option>Mauritius</option>
  <option>Maldives</option>
  <option>Malawi</option>
  <option>Mexico</option>
  <option>Malaysia</option>
  <option>Mozambique</option>
  <option>Namibia</option>
  <option>New Caledonia</option>
  <option>Niger</option>
  <option>Norfolk Island</option>
  <option>Nigeria</option>
  <option>Nicaragua</option>
  <option>Netherlands</option>
  <option>Norway</option>
  <option>Nepal</option>
  <option>Nauru</option>
  <option>Niue</option>
  <option>New Zealand</option>
  <option>Oman</option>
  <option>Panama</option>
  <option>Peru</option>
  <option>French Polynesia</option>
  <option>Papua New Guinea</option>
  <option>Philippines</option>
  <option>Pakistan</option>
  <option>Poland</option>
  <option>Saint Pierre and Miquelon</option>
  <option>Pitcairn</option>
  <option>Puerto Rico</option>
  <option>Palestinian Territory</option>
  <option>Portugal</option>
  <option>Palau</option>
  <option>Paraguay</option>
  <option>Qatar</option>
  <option>Reunion</option>
  <option>Romania</option>
  <option>Serbia</option>
  <option>Russia</option>
  <option>Rwanda</option>
  <option>Saudi Arabia</option>
  <option>Solomon Islands</option>
  <option>Seychelles</option>
  <option>Sudan</option>
  <option>Sweden</option>
  <option>Singapore</option>
  <option>Saint Helena</option>
  <option>Slovenia</option>
  <option>Svalbard and Jan Mayen</option>
  <option>Slovakia</option>
  <option>San Marino</option>
  <option>Senegal</option>
  <option>Somalia</option>
  <option>Suriname</option>
  <option>Sao Tome and Principe</option>
  <option>El Salvador</option>
  <option>Syria</option>
  <option>Swaziland</option>
  <option>Turks and Caicos Islands</option>
  <option>Chad</option>
  <option>French Southern Territories</option>
  <option>Togo</option>
  <option>Thailand</option>
  <option>Tajikistan</option>
  <option>Tokelau</option>
  <option>East Timor</option>
  <option>Turkmenistan</option>
  <option>Tunisia</option>
  <option>Tonga</option>
  <option>Turkey</option>
  <option>Trinidad and Tobago</option>
  <option>Tuvalu</option>
  <option>Taiwan</option>
  <option>Tanzania</option>
  <option>Ukraine</option>
  <option>Uganda</option>
  <option>United States Minor Outlying Islands</option>
  <option>United States</option>
  <option>Uruguay</option>
  <option>Uzbekistan</option>
  <option>Vatican</option>
  <option>Saint Vincent and the Grenadines</option>
  <option>Venezuela</option>
  <option>British Virgin Islands</option>
  <option>U.S. Virgin Islands</option>
  <option>Vietnam</option>
  <option>Vanuatu</option>
  <option>Wallis and Futuna</option>
  <option>Samoa</option>
  <option>Yemen</option>
  <option>Mayotte</option>
  <option>South Africa</option>
  <option>Zambia</option>
  <option>Zimbabwe</option>
  <option value="Other Country">%MAKETEXT{"Other Country"}%</option>
  </select>
  </td>
</tr>
%GROUPINFO{
      header="$percntINCLUDE{\"%WEB%.%TOPIC%\" section=\"rendergroupheader\"}$percnt"
      footer="$percntINCLUDE{\"%WEB%.%TOPIC%\" section=\"rendergroupfooter\"}$percnt"
      format="$percntINCLUDE{\"%WEB%.%TOPIC%\"
         section=\"rendergroup\"
         groupname=\"$name\"
         allowschange=\"$allowschange\"
       }$percnt"
      separator=" "
}%<tr>
  <td class="registrationLabel"> %MAKETEXT{"Comments:"}%</td>
  <td><textarea %NOREGISTRATION%  name="Twk0Comment" wrap="virtual" rows="4" cols="38" class="foswikiInputField"></textarea></td>
</tr>
</table>
</div><!-- /foswikiFormStep-->
<!--
   # login method used by this site:
   * Set LOGIN_METHOD_IN_THIS_SITE = %IF{"$ ALLOWLOGINNAME" then="LoginName" else="WikiName"}%
-->
<div class="foswikiFormStep">
<input type="hidden" name="rx" value='%BLACKLISTPLUGIN{ action="magic" }%' />
<input type="hidden" name="topic" value="%TOPIC%" />
<input type="hidden" name="action" value="register" />
<input %NOREGISTRATION%  type="submit" class="foswikiSubmit" value=' %MAKETEXT{"Register"}% ' />
</div><!-- /foswikiFormStep-->
<div class="foswikiFormStep foswikiLast">
%MAKETEXT{"If you have any questions about registration, send an e-mail to [_1]." args="<a href='mailto:%WIKIWEBMASTER%?subject=%TOPIC%&#32;Question'>%WIKIWEBMASTER%</a>"}%
</div><!-- /foswikiFormStep-->
</div><!-- /foswikiFormSteps-->
</form>

<!-- GROUPINFO formaters -->
<verbatim style="display:none;">
TODO: need to make the header&footer not display if there are no groups they can join
TODO: should redo this topic to look differet between a guest registering themselves, and a registered user inviting/registering a user
<!--
  parameters: groupname, allowschange
-->
%STARTSECTION{"rendergroup"}%<!-- rendergroup -->
%INCLUDE{"%WEB%.%TOPIC%"
  section="%IF{"%allowschange%" then="changegroup" else="nochange"}%"
  groupname="%groupname%"
}%
<!-- /rendergroup -->%ENDSECTION{"rendergroup"}%
<!--
  parameters: groupname
-->
%STARTSECTION{"changegroup"}%<!-- changegroup -->
<input type="checkbox" name="Twk0AddToGroups" class="foswikiInputField" value="%groupname%" label="%groupname%" />
               %IF{"not istopic '%MAINWEB%.%groupname%'" then="<nop>" else="%MAINWEB%."}%%groupname%
<!-- /changegroup -->%ENDSECTION{"changegroup"}%
<!--
  parameters: 
-->
%STARTSECTION{"nochange"}%<!-- nochange// --> %ENDSECTION{"nochange"}%

<!--
  parameters: 
-->
%STARTSECTION{"rendergroupheader"}%<!-- rendergroupheader -->
<tr>
  <td class="registrationLabel"> %MAKETEXT{"Wiki Groups to join:"}% </td>
  <td>
<!-- //rendergroupheader -->%ENDSECTION{"rendergroupheader"}%
<!--
  parameters: 
-->
%STARTSECTION{"rendergroupfooter"}%<!-- rendergroupfooter -->
  </td>
</tr>
<!-- //rendergroupfooter -->%ENDSECTION{"rendergroupfooter"}%
</verbatim>

%MAKETEXT{"*Important:* the information provided in this form will be stored in a database on the web server. This database is accessible to anyone who can access the server through the web (though passwords will be encrypted, and e-mail addresses will be obfuscated to help prevent spamming). Your country, or the country where the server is hosted, may have Data Protection laws governing the maintenance of such databases. If you are in doubt, you should contact [_1] for details of the Data Protection Policy of this web server before registering." args="<a href='mailto:%WIKIWEBMASTER%?subject=Data%20Protection%20Policy'>%WIKIWEBMASTER%</a>"}%

%ADDTOHEAD{
text="<script type='text/javascript' src='%PUBURL%/%SYSTEMWEB%/JavascriptFiles/foswikiString.js'></script>
<style type='text/css' media='all'>
#registration {
	border:0;
}
#registration th,
#registration td {
	padding:.2em;
	vertical-align:top;
}
#registration .registrationLabel {
	text-align:right;
}
</style>"
}%